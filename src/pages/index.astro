---
import Layout from '../layouts/Layout.astro';
import Navigation from '../components/Navigation.astro';
import papers from '../content/papers.json';

// Get random papers from 2023
const papers2023 = papers.filter(paper => paper.year === 2024);
const featuredPapers = papers2023
  .sort(() => Math.random() - 0.5) // Shuffle the array
  .slice(0, 3); // Take first 3 papers
---

<Layout title="ConSOLE Archive - Access the Proceedings of ConSOLE Conferences">
  <Navigation currentPage="home" />
  
  <!-- Hero Section with Search -->
  <section class="bg-gradient-to-br from-primary-50 to-accent-50 py-16 lg:py-24">
    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
      <!-- Main Heading -->
      <h1 class="text-4xl lg:text-6xl font-crimson font-semibold text-primary mb-4">
        ConSOLE Archive
      </h1>
      <p class="text-xl lg:text-2xl text-text-secondary mb-8 font-crimson">
        2000 - 2025
      </p>
      <p class="text-lg text-text-secondary mb-12 max-w-2xl mx-auto">
        Explore decades of ConSOLE proceedings, connect research across generations, and track research trends.
      </p>

      <!-- Primary Search Bar -->
      <form action="/results" method="GET" class="relative max-w-2xl mx-auto mb-8">
        <div class="relative">
          <input 
            type="text" 
            name="q"
            placeholder="Search papers, authors, topics, or ConSOLE editions..." 
            class="w-full px-6 py-4 text-lg border-2 border-primary-200 rounded-xl focus:ring-4 focus:ring-primary-100 focus:border-primary-500 focus:outline-none transition-all duration-300 pr-16" 
            id="main-search" 
            required
            minlength="1"
            autocomplete="off"
          />
          <button 
            type="submit"
            class="absolute right-3 top-1/2 transform -translate-y-1/2 bg-primary text-white p-2 rounded-lg hover:bg-primary-700 transition-smooth"
          >
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
            </svg>
          </button>
        </div>
      </form>

      <script>
        // Debug form submission
        document.addEventListener('DOMContentLoaded', function() {
          const form = document.querySelector('form[action="/results"]') as HTMLFormElement;
          if (form) {
            form.addEventListener('submit', function(e) {
              const input = form.querySelector('input[name="q"]') as HTMLInputElement;
              if (input) {
                console.log('Form submitted with query:', input.value);
                console.log('Form action:', form.action);
                console.log('Form method:', form.method);
              }
            });
          }
        });
      </script>

      <!-- Quick Search Tags -->
      <div class="flex flex-wrap justify-center gap-3">
        <a href="/results?q=syntax" class="px-4 py-2 bg-white border border-primary-200 text-primary-700 rounded-full hover:bg-primary-50 transition-smooth text-sm">
          Syntax
        </a>
        <a href="/results?q=phonology" class="px-4 py-2 bg-white border border-primary-200 text-primary-700 rounded-full hover:bg-primary-50 transition-smooth text-sm">
          Phonology
        </a>
        <a href="/results?q=morphology" class="px-4 py-2 bg-white border border-primary-200 text-primary-700 rounded-full hover:bg-primary-50 transition-smooth text-sm">
          Morphology
        </a>
        <a href="/results?q=semantics" class="px-4 py-2 bg-white border border-primary-200 text-primary-700 rounded-full hover:bg-primary-50 transition-smooth text-sm">
          Semantics
        </a>
        <a href="/results?q=2024" class="px-4 py-2 bg-white border border-primary-200 text-primary-700 rounded-full hover:bg-primary-50 transition-smooth text-sm">
          ConSOLE32 (2024)
        </a>
      </div>
    </div>
  </section>

  <!-- Featured Discoveries Section -->
  <section class="py-16 bg-white">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="text-center mb-12">
        <h2 class="text-3xl lg:text-4xl font-crimson font-semibold text-primary mb-4">Latest Volume</h2>
        <p class="text-lg text-text-secondary max-w-2xl mx-auto">
          Proceedings papers from ConSOLE32, held in Göttingen, Germany, in 2025.
        </p>
      </div>

      <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
        {featuredPapers.map(paper => (
          <div class="card hover:shadow-lg transition-all duration-300 group" style="padding: 2rem; border-radius: 0.75rem;">
            <div class="flex items-start justify-between mb-4">
              <span class="px-3 py-1 bg-accent-100 text-accent-700 text-sm font-medium rounded-full">{paper.edition}</span>
              <button class="text-text-secondary hover:text-accent transition-smooth">
                
              </button>
            </div>
            <h3 class="text-xl font-crimson font-semibold text-primary mb-3 group-hover:text-primary-700 transition-smooth">
              <a href={`/paper/${paper.slug}`}>{paper.title}</a>
            </h3>
            <p class="text-text-secondary mb-4 line-clamp-3">
              {paper.abstract.length > 150 ? `${paper.abstract.substring(0, 150)}...` : paper.abstract}
            </p>
                         <div class="flex items-center justify-between text-sm text-text-secondary">
               <div class="flex items-center space-x-2">
                 <span><b>
                   {paper.authors.length === 1 
                     ? paper.authors[0] 
                     : paper.authors.length === 2 
                       ? `${paper.authors[0]} & ${paper.authors[1]}`
                       : `${paper.authors[0]} et al.`
                   }
                 </b></span>
               </div>
              <div class="flex items-center space-x-4">
                <span class="flex items-center space-x-1">
                
                </span>
                <span class="font-mono">{paper.year}</span>
              </div>
            </div>
          </div>
        ))}
      </div>

      <div class="text-center mt-12">
        <a href="/papers" class="btn-primary">Explore All Papers</a>
      </div>
    </div>
  </section>

  
  <!-- Footer -->
  <footer class="bg-primary text-white py-12">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="grid md:grid-cols-4 gap-8">
        <!-- Brand Column -->
        <div class="md:col-span-2">
          <div class="flex items-center space-x-3 mb-4">
            <img src="/logo.png" alt="SOLE Archive" class="w-8 h-8 object-contain" loading="eager" style="filter: invert(1);" />
            <div>
              <h3 class="text-xl font-crimson font-semibold">SOLE Archive</h3>
              <p class="text-sm text-primary-200 font-mono">ConSOLE Proceedings</p>
            </div>
          </div>
          <p class="text-primary-100 mb-4 max-w-md">
            Archive of the ConSOLE proceedings, from 2000 to 2025.
          </p>
          <div class="flex space-x-4">
            
            <a href="https://www.linkedin.com/company/student-organization-of-linguistics-in-europe/posts/?feedView=all" target="_blank" 
            rel="noopener noreferrer"  class="text-primary-200 hover:text-white transition-smooth">
              <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                <path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/>
              </svg>
            </a>
          </div>
        </div>

        <!-- Quick Links -->
        <div>
          <h4 class="font-crimson font-semibold mb-4">Quick Links</h4>
          <ul class="space-y-2 text-primary-100">
            <li><a href="/" class="hover:text-white transition-smooth">Home</a></li>
            <li><a href="/papers" class="hover:text-white transition-smooth">Browse Papers</a></li>
            <li><a href="/analytics" class="hover:text-white transition-smooth">Analytics</a></li>
            <li><a href="/board" class="hover:text-white transition-smooth">Editorial Board</a></li>
          </ul>
        </div>

        <!-- Resources -->
        <div>
          <h4 class="font-crimson font-semibold mb-4">Resources</h4>
          <ul class="space-y-2 text-primary-100">
            <li><a href="https://www.universiteitleiden.nl/en/events/series/sole" target="_blank" 
              rel="noopener noreferrer" class="hover:text-white transition-smooth">About SOLE</a></li>
            
            <li><a href="mailto:sole.leiden@gmail.com" class="hover:text-white transition-smooth">Contact</a></li>
          </ul>
        </div>
      </div>

      <div class="border-t border-primary-700 mt-8 pt-8 flex flex-col md:flex-row justify-between items-center">
        <p class="text-primary-200 text-sm">© 2025 SOLE Archive. Website built by <a href="https://tomsgrizzi.github.io/" class="hover:text-white transition-smooth">Tommaso Sgrizzi</a>.</p>
        <div class="flex space-x-6 mt-4 md:mt-0">
          
        </div>
      </div>
    </div>
  </footer>
  </Layout>

 <style>
   /* Override card styling to ensure proper spacing */
   .card {
     padding: 2rem !important;
     border-radius: 0.75rem !important;
     border: 1px solid #e5e7eb !important;
     background: white !important;
     box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06) !important;
     transition: all 0.3s ease-out !important;
   }
   
   .card:hover {
     transform: translateY(-2px) !important;
     box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05) !important;
   }
 </style>

<script>
  // Search functionality
  document.getElementById('main-search')?.addEventListener('focus', function() {
    document.getElementById('search-suggestions')?.classList.remove('hidden');
  });

  document.addEventListener('click', function(e) {
    const target = e.target as HTMLElement;
    if (target && !target.closest('#main-search') && !target.closest('#search-suggestions')) {
      document.getElementById('search-suggestions')?.classList.add('hidden');
    }
  });
</script> 